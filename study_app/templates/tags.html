<h2>タグ管理</h2>

<a href="/">← 記録ページに戻る</a>
<hr>

<form method="POST" action="{{ url_for('add_tag') }}">
    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
    <input type="text" name="name" placeholder="タグ名" required>

    <select name="tag_type" required>
     <option value="subject">科目</option>
     <option value="category">カテゴリ</option>
    </select>

    <button type="submit">追加</button>
</form>

<h3>カテゴリタグ一覧</h3>
<ul>
{% for tag in category_tags %}
  <li>
    {{ tag.name }}

    <form action="/tags/move/{{ tag.id }}/up" method="post">
      <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
      <button>↑</button>
    </form>
    <form action="/tags/move/{{ tag.id }}/down" method="post">
      <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
      <button>↓</button>
    </form>


    <form action="/tags/delete/{{ tag.id }}" method="post" style="display:inline;">
      <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
      <button type="submit">×</button>
    </form>
  </li>
{% endfor %}

<h3>科目タグ一覧</h3>
<ul>
{% for tag in subject_tags %}
  <li>
    {{ tag.name }}
    <form action="/tags/move/{{ tag.id }}/up" method="post">
      <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
      <button>↑</button>
    </form>
    <form action="/tags/move/{{ tag.id }}/down" method="post">
      <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
      <button>↓</button>  
    </form>
    
    <form action="{{ url_for('delete_tag', tag_id=tag.id) }}" method="post" style="display:inline;">
      <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
      <button type="submit">×</button>
    </form>
  </li>
{% endfor %}
</ul>
